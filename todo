#!/bin/bash

TODO_FILE="$HOME/.todo"

function todo_stamp() {
    date +"%Y-%m-%d %H:%M:%S"
}

function todo_list() {
    cat -n $TODO_FILE
}

function todo_edit() {
    ${EDITOR:-vi} $TODO_FILE
}

function todo_write() {
    printf "$(todo_stamp)\t--\t[] $@\n" >> $TODO_FILE
}

function todo_main() {
    if [[ $# -eq 0 ]]; then
        todo_list
        exit 0
    fi

    if [[ "$1" == "-E" || "$1" == "--edit" ]]; then
        todo_edit
        exit 0
    fi

    todo_write "$@"

    exit 0
}

todo_main "$@"
